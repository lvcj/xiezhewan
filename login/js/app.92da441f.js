webpackJsonp([2],{0:function(t,e,n){t.exports=n("NHnr")},"3Ji6":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),o={name:"app",components:{}},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],r=n("XyMi");function l(t){n("p+3o")}var c=!1,u=l,d="data-v-728e4f64",p=null,m=Object(r["a"])(o,a,s,c,u,d,p),f=m.exports,h=n("/ocq"),g=(n("SldL"),n("7hDC")),b=n.n(g),v=(n("MfeA"),n("y9m4"),n("n12u"),n("zL8q")),w=n.n(v),y=n("mtWM"),x=n.n(y),_=n("mw3O"),k=n.n(_),F=200,C=300,D=x.a.create({baseURL:"http://localhost:5000",timeout:18e4}),T=function(t,e){Object(v["Message"])({message:t,type:e,duration:2e3})},E=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=Object.assign({},i,{url:e,method:t,data:n});return o.headers=o.headers||{},new Promise(function(t,e){D.request(o).then(function(n){var i=n.data,o=n.status;200===o&&(i.status===F?(void 0!==i.message&&T(i.message,"success"),t(i)):i.status===C&&(T(i.message,"error"),e(i))),i.HasError&&(n.config.notNotifyError||T(i.message,"error"),e(n)),t(i)}).catch(function(t){t.config.notNotifyError||(console.log("请求失败,请查看服务器信息","error"),T("请求失败,请查看服务器信息,稍后重试","error")),e(t)})})},$={get:function(t,e){return E("get",t,null,e)},delete:function(t,e,n){return E("delete",t,e,n)},head:function(t,e){return E("head",t,null,e)},post:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.headers||(n.headers={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}),E("post",t,k.a.stringify(e),n)},put:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.headers={"Content-Type":"application/json; charset=UTF-8"},E("put",t,e,n)},patch:function(t,e,n){return E("path",t,k.a.stringify(e),n)},setCommonHeader:function(t,e){D.defaults.headers.common[t]=e}},S=function(t){return $.post("/login",t)},I={data:function(){var t=function(t,e,n){return e?e.match(/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/)?void n():n(new Error("请输入合法的手机号")):n(new Error("用户名不能为空"))},e=function(t,e,n){""===e?n(new Error("请输入密码")):e.length<6&&n(new Error("密码必须大于6位")),n()};return{title:"Login Form",loading:!1,btnText:"登录",loginForm:{username:"13000000000",password:""},passType:!0,rules:{password:[{validator:e,trigger:"blur"}],username:[{validator:t,trigger:"blur"}]}}},computed:{passInput:function(){return this.passType?"password":""},viewColor:function(){return this.passType?{}:{color:"#409EFF"}}},methods:{loginHandle:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("校验失败"),!1;e.login()})},viewPass:function(){this.passType=!this.passType},login:function(){var t=b()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,this.btnText="登录中",t.next=4,S(this.loginForm);case 4:e=t.sent,e.status?(sessionStorage.setItem("accessToken",e.token),this.$router.push({path:"/home"})):this.$message.error("用户名或密码错误，请重试！"),this.loading=!1,this.btnText="登录";case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"login-inner"},[n("div",{staticClass:"title"},[t._v("\n            "+t._s(t.title)+"\n        ")]),n("el-form",{ref:"ruleForm",attrs:{model:t.loginForm,"label-width":"80px",rules:t.rules}},[n("el-form-item",{attrs:{label:"用户名：",prop:"username"}},[n("el-input",{attrs:{name:"username",type:"text",autoComplete:"on",placeholder:"username"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}}),n("i",{directives:[{name:"show",rawName:"v-show",value:t.loginForm.username.length,expression:"loginForm.username.length"}],staticClass:"el-icon-close clear-name",on:{click:function(e){t.loginForm.username=""}}})],1),n("el-form-item",{attrs:{label:"密码：",prop:"password"}},[n("el-input",{attrs:{type:t.passInput,"auto-complete":"off"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}}),n("i",{staticClass:"el-icon-view view-pass",style:t.viewColor,on:{click:t.viewPass}})],1),n("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:t.loading,type:"primary"},on:{click:function(e){t.loginHandle("ruleForm")}}},[t._v(t._s(t.btnText))])],1),n("span",[t._v("username: 13000000000; password: 123456")])],1)])},j=[];function z(t){n("sgXb")}var N=!1,H=z,V="data-v-06979f24",J=null,M=Object(r["a"])(I,O,j,N,H,V,J),R=M.exports,L=function(){return n.e(0).then(n.bind(null,"26dS"))};i["default"].use(h["a"]);var P=new h["a"]({routes:[{path:"/login",name:"login",component:R},{path:"/home",name:"home",component:L}]});P.beforeEach(function(t,e,n){sessionStorage.getItem("accessToken")?n():"/login"===t.path?n():n("/login")});var q=P,U=(n("tvR6"),n("n4oI"),{props:{title:{type:String,default:"表格标题"},tableData:{type:Array,default:function(){return[]}},fetchFn:Function,index:Number},created:function(){var t=this;this.tableData&&this.tableData.length>0&&(this.tableColumn=Object.keys(this.tableData[0]),this.innerData=this.tableData.map(function(e){return t.$set(e,"edit",!1),e}))},data:function(){return{innerData:[],tableColumn:[],dialogVisible:!1,currentIndex:""}},watch:{tableData:function(t){var e=this;t&&t.length>0&&(this.tableColumn=Object.keys(t[0]),this.innerData=t.map(function(t){return e.$set(t,"edit",!1),t}))}},methods:{plus:function(){var t={};this.tableColumn.forEach(function(e){t[e]="edit"!==e&&""}),this.innerData.push(t)},deleteItem:function(t,e){console.log(e),this.currentIndex=t,this.dialogVisible=!0},delItem:function(){this.innerData.splice(this.currentIndex,1),this.dialogVisible=!1},comfirmEdit:function(t,e){e.edit=!e.edit,this.$message({message:"数据已保存",type:"success"})},publishData:function(){var t=JSON.parse(JSON.stringify(this.innerData.slice(0)));t.forEach(function(t){delete t["edit"]}),this.$emit("publish",t,this.index)}}}),X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table-wrapper"},[n("el-row",{staticStyle:{"margin-bottom":"4px"}},[n("el-col",{attrs:{span:4}},[n("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.title))])],1),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2,offset:18}})],1),n("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",border:"",data:t.innerData}},[t._l(t.tableColumn,function(e,i){return"edit"!=e?n("el-table-column",{key:i,attrs:{label:e},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.edit?[n("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:i.row[e],callback:function(n){t.$set(i.row,e,n)},expression:"scope.row[item]"}})]:n("span",[t._v(t._s(i.row[e]))])]}}])}):t._e()}),t.innerData.length?n("el-table-column",{attrs:{label:"操作",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-check",circle:""},on:{click:function(n){t.comfirmEdit(e.$index,e.row)}}}):n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(t){e.row.edit=!e.row.edit}}})]}}])}):t._e()],2),n("el-row",{staticStyle:{"margin-top":"4px"}},[n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4,offset:20}},[n("el-button",{attrs:{type:"success",size:"small"},on:{click:t.publishData}},[t._v("发布数据")])],1)],1),n("el-dialog",{attrs:{title:"警告",visible:t.dialogVisible,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("span",[t._v("此操作不可撤销，请确认后操作！")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:t.delItem}},[t._v("确 定")])],1)])],1)},A=[];function W(t){n("3Ji6")}var B=!1,G=W,K="data-v-6e5404e8",Q=null,Y=Object(r["a"])(U,X,A,B,G,K,Q),Z=Y.exports;i["default"].use(w.a),i["default"].component("editTable",Z),i["default"].config.productionTip=!1,new i["default"]({router:q,render:function(t){return t(f)}}).$mount("#app")},n4oI:function(t,e){},"p+3o":function(t,e){},sgXb:function(t,e){},tvR6:function(t,e){}},[0]);